# тяжелый базовый образ
# почему такой древний python? fastapi и pydantic во многом используют новые фичи python, да и в целом. Хотя бы 3.10.
FROM python:3.7

COPY requirements.txt /app/
RUN pip install --upgrade pip
RUN pip install -r /app/requirements.txt

# контейнер выдает ошибку при запуске, так как app в контейнере просто папка, а не пакет (__init__ не копируется),
# и происходит ошибка импорта.
# в данной структуре проекта логично в качестве source root указать src и все импорты в коде делать относительно него.
# или же вынести всё лишнее из app в корень проекта и копировать её в докер, как пакет. Посмотрите, как делать структуру
# проектов, как организуются пакеты в python.
COPY src/ /app/

WORKDIR /app

CMD ["uvicorn", "main:app", "--host=0.0.0.0"]